<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>Basic Example</title>
</head>
<body>
<script src="../../build/react.js"></script>
<script src="../../build/react-dom.js"></script>
<script src="../../build/browser.min.js"></script>
<script src="https://static.zhong.com/pc/skin/js/jquery-1.11.2.js"></script>
<div id="wf">
</div>

<script type="text/babel">
  var UserGist=React.createClass({
      /*设置初始值*/
      getInitialState:function(){
          return (
              {
                  userName:"1",
                  lastGistUrl:"2"
              }
          )
      },
      /*组件已经构建完成*/
      componentDidMount:function(){
          this.serverRequest=$.get(this.props.source,function(data){
//              console.log(data[0])
              var lastGist=data[0];
              this.setState({
                  userName:lastGist.owner.login,
                  lastGistUrl:lastGist.html_url
              })
          }.bind(this)
      )},
      //当异步加载数据的时候， 使用 componentWillUnmount 来取消任何未完成的请求 在组件卸载之前
      componentWillUnmount:function(){
          this.serverRequest.abort();
      },
      render:function(){
          return(
                  <div>
                  {this.state.userName}最新的Gist共享地址：<a href={this.state.lastGistUrl}>{this.state.lastGistUrl}</a>
          </div>
          )
      }
  });
    ReactDOM.render(<UserGist source="https://api.github.com/users/octocat/gists" />,wf)
</script>
</body>
</html>
