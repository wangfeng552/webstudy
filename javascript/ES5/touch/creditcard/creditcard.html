<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport"
          content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no"/>
    <title>信用卡优惠</title>
    <script src="./static/rem.js"></script>
    <link rel="stylesheet" href="./static/creditcard.css"/>
</head>

<body>
<div class="main">
    <div class="wrapper">
        <section class="page page1 clearfix">
            <span class="icon logo"></span>
            <span class="icon t"></span>
            <span class="icon st"></span>
            <div class="content">
                <p class="title"><span>办信用卡赠</span><b>1000</b>积分</p>
                <p class="txt">现已开通畅由专属中行、兴业、民生银行信用卡申请通道</p>
                <p class="txt">成功开卡并首刷兴业银行信用卡或者成功办理民生银行信用卡即可<b>获赠1000积分</b></p>
                <p class="txt">积分在次月5号前发放至您的畅由账户</p>
            </div>
            <a href="/event/2017/1102/index.html" class="btn submit">立即申请</a>
        </section>
        <section class="page page2 image">
            <span class="icon t image"></span>
            <div class="content">
                <span class="txt">万龙度假天堂消费满200元立减60元</span>
                <p class="txt">海底捞消费满200元立减60元</p>
                <p class="txt">部分持卡用户在加油站类商户消费单卡累计满1000元返现50元</p>
                <p class="txt">成功办理部分品牌汽车分期业务且分期金额大于等于人民币5万元，可获赠最高600元价值的礼品</p>
            </div>
            <a class="btn submit" data-id="P000000446" data-spm="69">立即申请</a>
        </section>
        <!--上海银行-->
        <section class="page page3 image">
            <span class="icon t image"></span>
            <div class="content">
                <p class="txt">新用户刷卡三笔即送价值<strong class="aa">598</strong>元双肩包</p>
                <p class="txt">每周三星巴克买一赠一</p>
                <p class="txt">每周五COSTA咖啡买一赠一</p>
                <p class="txt">每周五天天果园满100立减30元</p>
            </div>
            <a class="btn submit" data-id="P000001185" data-spm="100167">立即申请</a>
            <!--https://mbank.bankofshanghai.com/Latte/#/CreditHot?YLLink=450026-->
        </section>
        <!--兴业-->
        <section class="page page4 image">
            <span class="icon t image"></span>
            <div class="content">
                <p class="txt">盒马鲜生满88立减18 </p>
                <p class="txt">香天下/王品牛排/wagas/BAKER&SPICE/满记甜品/一风堂/沁园到店刷卡立享五折</p>
                <span class="txt">屈臣氏满100元最高优惠30元</span>
                <p class="txt">百果园满50元立减10元优惠</p>
                <p class="txt">好利来满30立减10</p>
                <span class="txt">太平洋咖啡满28立减20</span>
                <p class="txt">爱茜茜里享单品8元专享价</p>

            </div>
            <a class="btn submit" data-id="P000000447" data-spm="70">立即申请</a>
        </section>
        <!--民生银行-->
        <section class="page page5 image">
            <span class="icon t image"></span>
            <div class="content">
                <p class="txt">境外指定消费，单月累计满1000美元可享最高80美元返现，单月累计满5000美元，超额部分返10%</p>
                <p class="txt">每周五至周日，淘票票购买电影票，单笔满30立减15</p>
                <p class="txt">在12306的APP购票中银联在线支付满30元最高立减30元</p>
                <span class="txt">东航官方渠道购票银联在线支付满500元，每月18日立减62元，每周二、六立减20元</span>
                <p class="txt">每周二、六9:00-23:59，神州专车iOS客户端Apple Pay支付充100元送20元，支付100元减20元</p>
            </div>
            <a class="btn submit" data-id="P000000681" data-spm="100066">立即申请</a>
        </section>
    </div>
</div>
<a class="icon" id="next"></a>
<script src="./static/common.js"></script>
<script>
    document.querySelector('.main').style.top = !browserUtil.weixin ? '.88rem' : 0;
    var fontSize = parseInt(document.documentElement.style.fontSize.replace('px', ''));
    document.documentElement.style.fontSize = (!browserUtil.weixin && !browserUtil.jfmore ? fontSize * 0.9 : fontSize) + 'px';

    var cr = {
        param: {
            isclick: false,
            ismoving: false,
            setId: ''
        },
        init: function () {
            this.slide();
        },
        slide: function () {
            var _self = this;
            var $w = document.querySelector('.wrapper'),
              $s = document.querySelectorAll('section'),
              index = 0,
              startY = 0,
              endY = 0,
              len = $s.length;
            $w.style.height = len + '00%';
            $s.forEach(function (e) {
                e.style.height = 1 / len * 100 + '%';
            });
            $w.addEventListener('touchstart', function (e) {
                _self.param.ismoving = false;
                startY = e.touches[0].pageY; // 触摸目标在页面中的y坐标
//                var clientY=e.touches[0].clientY;  触摸目标在视口中的x坐标
//                var screenY = e.touches[0].screenY 触摸目标在屏幕中的y坐标

            });
            $w.addEventListener('touchmove', function (e) {
                e.preventDefault(); // 阻止滚动
                _self.param.ismoving = true;
//                clearTimeout(_self.param.setId);
            });
            $w.addEventListener('touchend', function (e) {
                endY = e.changedTouches[0].pageY;  // 触摸结束后的页面Y坐标。
                var moveY = endY - startY; // 判断从上往下？
                console.log(moveY)
                Math.abs(moveY) > 50 ? _self.param.ismoving = true : _self.param.ismoving = false;//绝对值>50的滑动
                if (_self.param.ismoving) {
                    _self.param.isclick = true;
                    _self.param.ismoving = false;
                    if (moveY > 0) { //从上往下
                        index--;
                        if (index < 0) {
                            index = 0;
                        }
                    } else {//从下往上
                        index++;
                        if (index > len - 1) {
                            index = len - 1;
                        }
                    }
                    moveAction(index);
                } else {
                    _self.param.isclick = false;
                }
            });

            function moveAction(index) {
                document.getElementById('next').style.display = index === len - 1 ? 'none' : 'block'; // 判断箭头显示
                $w.style.top = '-' + index + '00%';
                var $page = document.querySelector('.page' + (index + 1)),          // .page5
                  $img = document.querySelector('.page' + (index + 1) + ' .image'); //.page5 .image
                //滚动加载图片
                if (!/active/.test($page.className)) {
                    $page.className += ' active';
                    $img ? $img.className += ' active' : '';
                }
            }
        }
    }

    if (!Array.prototype.forEach) {
        Array.prototype.forEach = function forEach(callback) {
            var len = this.length;
            if (typeof callback != "function") {
                throw new TypeError();
            }
            var thisArg = arguments[1];
            for (var i = 0; i < len; i++) {
                if (i in this) {
                    callback.call(thisArg, this[i], i, this);
                }
            }
        }
    }
    window.onload = function () {
        cr.init();
    }
</script>
</body>

</html>