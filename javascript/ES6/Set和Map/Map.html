<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta content="telephone=no,email=no" name="format-detection" />
	<title>Map</title>
</head>

<body>
	Map它类似于对象，也是键值对的集合，但是“键”的范围不限于字符串，各种类型的值（包括对象）都可以当作键。
	也就是说，Object 结构提供了“字符串—值”的对应，Map 结构提供了“值—值”的对应，是一种更完善的 Hash结构实现。
	<script>
		var m = new Map();

		// set()给实例设置一对键值对，返回map实例。
		//添加一个字符串类型的键名
		m.set("name", "巷道")

		//添加一个数字类型的键名
		m.set(1, 2)

		//数组类型的键名
		m.set([1], 22)

		//对象类型的键名
		m.set({ "name": "张三" }, "我的名字")

		//	布尔类型的键名
		m.set(true, "addclass")

		//Symbol类型的键名
		//    m.set(Symbol('name'),2);

		//null为键名
		m.set(null, 2);

		//undefined为键名
		m.set(undefined, 2);

		m.get(true)			//get()方法作用：获取指定键名的键值，返回键值。
		m.has(Array[1])
		m.delete()
		m.clear()
		m.size
	</script>

	<script>
		const map = new Map()
		map.set('name', '李四')
		map.set('age', 24)
		map.set('adress', '上海')

		map.keys()   // => {'name', 'age', 'adress'}
		map.keys().next().value // => 'name'
		map.values() // => {'李四', 24, '上海'}

		for (let item of map.entries()) {
			console.log(item); // ['name','李四']
			item[0] // 'name'
			item[1] // '李四'
		}

	</script>

	<script>
		// Map转数组  
		const myMap = new Map().set(true, 7).set({}, 4)
		let arr = [...myMap]  // => [[{true,7},[{},4]]]

		//数组转Map
		new Map([
			[true, 7],
			[{ foo: 3 }, ['abc']]
		])

		//方法1 Map转为对象
		function strMapToObj(strMap) {
			let obj = Object.create(null);
			for (let [k, v] of strMap) {
				obj[k] = v;
			}
			return obj;  // =>{yes:true,no:false}
		}
		const myMap1 = new Map()
			.set('yes', true)
			.set('no', false);
		strMapToObj(myMap1)

		// 方法2 Map转对象
		Object.fromEntries(myMap1)  
		Object.fromEntries(new URLSearchParams('foo=bar&baz=qux'))


		// 对象转为Map
		let obj = { "a": 1, "b": 2 };
		let objMap = new Map(Object.entries(obj));
	</script>

	<script>
		// Map 转为 JSON
		function strMapToJson(strMap) {
			return JSON.stringify(strMapToObj(strMap));
		}

		let myMap2 = new Map().set('yes', true).set('no', false);
		strMapToJson(myMap2)

		// 另一种情况是，Map 的键名有非字符串，这时可以选择转为数组 JSON。
		function mapToArrayJson(map) {
			return JSON.stringify([...map]);
		}

		let myMap3 = new Map().set(true, 7).set({ foo: 3 }, ['abc']);
		mapToArrayJson(myMap3)
	</script>
</body>

</html>