/*! jshop - v1.0.1 - 2013-08-27
* https://github.com/wanghaixin/jshop-cx
* Copyright (c) 2013 wanghaixin; Licensed MIT */
function SkuIdPriceGetting() {
    var e = [],
    t,
    n,
    r,
    i = 0,
    s = "",
    o = function() {
        $("#JSHOP_CHANNEL_FLAG").val() == "ept";
        var r = $('span[jshop="price"]');
        $.each(r,
        function(t, n) {
            e.push($(n))
        }),
        e = jshop.component.arrayUnique(r),
        $(window).scroll(u)
    },
    u = function() {
        r = $(window).scrollTop() + document.documentElement.clientHeight;
        if (e.length == 0) return;
        var t = [];
        for (var n = 0,
        o = e.length; n < o; n++) if (e[n].offset().top < r) if ($("#JSHOP_CHANNEL_FLAG").val() == "ept") l(e[n]);
        else {
            var f = $(e[n]).attr("jdprice") || $(e[n]).attr("jsprice") || $(e[n]).attr("jskuprice");
            f && (s += "J_" + f + ",", i++, i == 20 && a(s))
        } else t.push(e[n]);
        a(s),
        e = t,
        delete t,
        e.length || $(window).unbind("scroll,resize", u)
    };
    window.callBackPriceService = function(e) {
        var t = 0;
        for (var n = 0; n < e.length; n++) t = e[n].id.substr(2),
        e[n].id = t,
        getNumPriceService(e[n])
    };
    var a = function(e) {
        var t = e.substr(e, e.length - 1);
        t && f(t),
        i = 0,
        s = ""
    },
    f = function(e) {
        var r = document.createElement("script");
        r.setAttribute("src", t + e + n),
        document.getElementsByTagName("head")[0].appendChild(r)
    },
    l = function(e) {
        var r = $(e).attr("jdprice") || $(e).attr("jsprice") || $(e).attr("jskuprice"),
        i = document.createElement("script");
        i.type = "text/javascript",
        i.src = t + r + n,
        (document.getElementsByTagName("head")[0] || document.documentElement).appendChild(i)
    };
    this.localPriceRefresh = function(e) {
        var t = [],
        n = e.find('span[jshop="price"]');
        t = jshop.component.arrayUnique(n),
        i = 0;
        for (var r = 0,
        o = t.length; r < o; r++) if ($("#JSHOP_CHANNEL_FLAG").val() == "ept") l(t[r]);
        else {
            var u = $(t[r]).attr("jdprice") || $(t[r]).attr("jsprice") || $(t[r]).attr("jskuprice");
            u && (s += "J_" + u + ",", i++, i == 20 && a(s))
        }
        a(s)
    },
    o(),
    u()
}

(function() {
    var e = this;
    e.jshop = e.jshop || {},
    e.js = e.jshop,
    function(e, t) {
        var n = function() {
           
        } (),
        r = function() {
            return {}
        } (),
        i = function() {
            return {
                marquee: function(e, t, n) {
                    n.innerHTML = t.innerHTML,
                    n.offsetTop - e.scrollTop <= 0 ? e.scrollTop -= t.offsetHeight: e.scrollTop++
                },
                slide: function(e) {
                    t("#" + e.wrapperId).jdSlide({
                        width: e.width,
                        height: e.height,
                        type: e.image,
                        pics: e.pics
                    })
                },
                shades: function() {
                    function e(e, t, n) {
                        var r = e.getElementsByTagName(t);
                        for (var i = 0,
                        s = r.length,
                        o = []; i < s; i++) r[i].className == n && o.push(r[i]);
                        return o.length == 1 && (o = o[0]),
                        o
                    }
                    function t(e, t) {
                        try {
                            e != null && (e.style.filter = "alpha(opacity=100)"),
                            e.filters ? e.filters.alpha.opacity = Math.round(t) : e.style.opacity = t / 100
                        } catch(n) {}
                    }
                    function n(t, n, r, i, s, o, u, a, f) {
                        this.slides = [],
                        this.over = !1,
                        this.S = this.S0 = n,
                        this.iW = r,
                        this.iH = i,
                        this.oP = s,
                        this.imgWidth = a,
                        this.imgHeight = f,
                        document.getElementById(t).style.width = o + "px",
                        document.getElementById(t).style.height = u + "px",
                        document.getElementById(t).style.position = "absolute",
                        document.getElementById(t).style.overflow = "hidden",
                        this.oc = document.getElementById(t),
                        this.frm = e(this.oc, "div", "slide"),
                        this.NF = this.frm.length,
                        this.resize();
                        for (var l = 0; l < this.NF; l++) this.frm[l].style.zIndex = "1",
                        this.frm[l].style.position = "absolute",
                        this.frm[l].style.background = "#000",
                        this.slides[l] = new Slide(this, l);
                        this.oc.parent = this,
                        this.view = this.slides[0],
                        this.Z = this.mx,
                        this.oc.onmouseout = function() {
                            return this.parent.mouseout(),
                            !1
                        }
                    }
                    return n.prototype = {
                        run: function() {
                            this.Z += this.over ? (this.mn - this.Z) * .5 : (this.mx - this.Z) * .5,
                            this.view.calc();
                            var e = this.NF;
                            while (e--) this.slides[e].move()
                        },
                        resize: function() {
                            this.wh = this.oc.clientWidth,
                            this.ht = this.oc.clientHeight,
                            this.wr = this.wh * this.iW,
                            this.r = this.ht / this.wr,
                            this.mx = this.wh / this.NF,
                            this.mn = this.wh * (1 - this.iW) / (this.NF - 1)
                        },
                        mouseout: function() {
                            this.over = !1,
                            t(this.view.img, this.oP)
                        }
                    },
                    Slide = function(e, n) {
                        this.parent = e,
                        this.N = n,
                        this.x0 = this.x1 = n * e.mx,
                        this.v = 0,
                        this.loaded = !1,
                        this.cpt = 0,
                        this.start = new Date,
                        this.obj = e.frm[n],
                        this.img = this.obj.getElementsByTagName("img")[0],
                        this.bkg = document.createElement("div"),
                        this.bkg.className = "backgroundText",
                        n == 0 && (this.obj.style.borderLeft = "none"),
                        this.obj.style.left = Math.floor(this.x0) + "px",
                        this.img.style.width = e.imgWidth + "px",
                        this.img.style.height = e.imgHeight + "px",
                        t(this.img, e.oP),
                        this.obj.parent = this,
                        this.obj.onmouseover = function() {
                            return this.parent.over(),
                            !1
                        }
                    },
                    Slide.prototype = {
                        calc: function() {
                            var e = this.parent;
                            for (var t = 0; t <= this.N; t++) e.slides[t].x1 = t * e.Z;
                            for (var t = this.N + 1; t < e.NF; t++) e.slides[t].x1 = e.wh - (e.NF - t) * e.Z
                        },
                        move: function() {
                            var e = this.parent,
                            t = (this.x1 - this.x0) / e.S;
                            this.N && Math.abs(t) > .5 && (this.obj.style.left = Math.floor(this.x0 += t) + "px");
                            var n = this.N < e.NF - 1 ? e.slides[this.N + 1].x0 - this.x0: e.wh - this.x0;
                            if (Math.abs(n - this.v) > .5) this.bkg.style.top = Math.floor(2 + e.ht - (n - e.Z) * e.iH * e.r) + "px",
                            this.v = n,
                            this.cpt++;
                            else if (!this.pro) {
                                this.pro = !0;
                                var r = new Date - this.start;
                                this.cpt > 1 && (e.S = Math.max(2, 28 / (r / this.cpt) * e.S0))
                            }
                            this.loaded || this.img.complete && (this.img.style.visibility = "visible", this.loaded = !0)
                        },
                        over: function() {
                            this.parent.resize(),
                            this.parent.over = !0,
                            t(this.parent.view.img, this.parent.oP),
                            this.parent.view = this,
                            this.start = new Date,
                            this.cpt = 0,
                            this.pro = !1,
                            this.calc(),
                            t(this.img, 100)
                        }
                    },
                    {
                        init: function(e, t, r, i, s) {
                            if (s == null || s == undefined) s = 100;
                            var o = new n("slider", 12, 1.84 / 3, .3125, s, e, t, r, i);
                            setInterval(function() {
                                o.run()
                            },
                            10)
                        }
                    }
                } (),
                slider2: function() {
                    var e = function(e) {
                        return typeof e == "string" ? document.getElementById(e) : e
                    },
                    t = function(e, t) {
                        return (t || document).getElementsByTagName(e)
                    },
                    n = function(e) {
                        this.initialize(e)
                    };
                    return n.prototype = {
                        initialize: function(n) {
                            var r = this;
                            this._id = n.id,
                            this._width = n.width,
                            this._height = n.height;
                            var i = n.imgArr;
                            this._div = document.createElement("div");
                            var s = "width:" + this._width + "px;height:" + this._height + "px;";
                            this._div.setAttribute("style", s),
                            this._div.setAttribute("id", "box"),
                            document.getElementById(this._id).appendChild(this._div);
                            var o = document.createElement("div"),
                            u = "width:" + this._width + "px;height:" + this._height + "px;";
                            o.className = "list",
                            o.setAttribute("style", u),
                            this._div.appendChild(o);
                            var a = document.createElement("ul");
                            o.appendChild(a);
                            var f = document.createDocumentFragment(),
                            l = "width:" + this._width + "px;height:" + this._height + "px;",
                            c = "width:" + this._width + "px;height:" + this._height + "px;";
                            for (var h = 0; h < i.length; h++) {
                                var p = document.createElement("li");
                                p.setAttribute("style", c);
                                var d = document.createElement("img");
                                d.setAttribute("style", l),
                                d.setAttribute("src", i[h].src),
                                d.setAttribute("onclick", "window.open('" + i[h].href + "')"),
                                d.setAttribute("alt", i[h].alt),
                                p.appendChild(d),
                                f.appendChild(p)
                            }
                            a.appendChild(f),
                            this.oBox = e(this._div),
                            this.oUl = t("ul", this.oBox)[0],
                            this.aImg = t("img", this.oBox),
                            this.timer = null,
                            this.autoTimer = null,
                            this.iNow = 0,
                            this.creatBtn(),
                            this.aBtn = t("li", this.oCount),
                            this.toggle(),
                            this.autoTimer = setInterval(function() {
                                r.next()
                            },
                            3e3),
                            this.oBox.onmouseover = function() {
                                clearInterval(r.autoTimer)
                            },
                            this.oBox.onmouseout = function() {
                                r.autoTimer = setInterval(function() {
                                    r.next()
                                },
                                3e3)
                            };
                            for (var h = 0; h < this.aBtn.length; h++) this.aBtn[h].index = h,
                            this.aBtn[h].onmouseover = function() {
                                r.iNow = this.index,
                                r.toggle()
                            }
                        },
                        creatBtn: function() {
                            this.oCount = document.createElement("ul"),
                            this.oFrag = document.createDocumentFragment(),
                            this.oCount.className = "count";
                            for (var e = 0; e < this.aImg.length; e++) {
                                var t = document.createElement("li");
                                t.innerHTML = e + 1,
                                this.oFrag.appendChild(t)
                            }
                            this.oCount.appendChild(this.oFrag),
                            this.oBox.appendChild(this.oCount)
                        },
                        toggle: function() {
                            for (var e = 0; e < this.aBtn.length; e++) this.aBtn[e].className = "";
                            this.aBtn[this.iNow].className = "current",
                            this.doMove( - (this.iNow * this.aImg[0].offsetHeight))
                        },
                        next: function() {
                            this.iNow++,
                            this.iNow == this.aBtn.length && (this.iNow = 0),
                            this.toggle()
                        },
                        doMove: function(e) {
                            var t = this;
                            clearInterval(t.timer),
                            t.timer = setInterval(function() {
                                var n = (e - t.oUl.offsetTop) / 6;
                                n = n > 0 ? Math.ceil(n) : Math.floor(n),
                                t.oUl.offsetTop == e ? clearInterval(t.timer) : t.oUl.style.top = t.oUl.offsetTop + n + "px"
                            },
                            40)
                        }
                    },
                    {
                        init: function(e) {
                            new n(e)
                        }
                    }
                } (),
                slider3: function() {}
            }
        } (),
        s = function() {
            return {
                sonny: function(e, n) {
                    typeof option == "function" && (n = option, option = {});
                    var r = t.extend({
                        current: "curr",
                        delay: 50,
                        index: 0
                    },
                    option || {}),
                    i = this,
                    s = null;
                    t.each(this,
                    function(e) {
                        t(this).bind("mouseover",
                        function() {
                            s != null && clearTimeout(s);
                            var o = t(this);
                            s = setTimeout(function() {
                                i.eq(r.index).removeClass(r.current),
                                r.index = e,
                                i.eq(r.index).addClass(r.current),
                                n && n(o)
                            },
                            r.delay)
                        })
                    })
                },
                sonnyCallback: function(e) {
                    e.find("img").each(function() {
                        var e = t(this).attr("src2");
                        t(this).attr("src", e),
                        t(this).removeAttr("src2")
                    })
                }
            }
        } (),
        o = function() {
            return {
                changeHref: function(e, n) {
                    var r = t("#" + e);
                    r.attr("href", r.attr("href") + "&page=" + t("#" + n).val())
                }
            }
        } (),
        u = function() {
            return {}
        } (),
        a = function() {
            return {
                _setValue: function(e, n) {
                    t("#" + e).val(n),
                    t(document.forumForm).submit()
                },
                setPage: function(e) {
                    this._setValue("page", e)
                },
                search: function() {
                    var e = t("#fserch").val();
                    this._setValue("subject", e)
                },
                toPage: function(e) {
                    this.setPage(t("#" + e).val())
                },
                order: function(e) {
                    this._setValue("sortFiled", e)
                }
            }
        } ();
        e.util = n,
        e.common = r,
        e.ef = i,
        e.baby = s,
        e.art = o,
        e.nav = u,
        e.forum = a
    } (e.jshop, jQuery)
})(),
function(e) {
    window.$ = e,
    e.fn.extend({
        toggleBackground: function(t, n) {
            e(this).mouseover(function() {
                e(this).css("background-color", t || "")
            }).mouseout(function() {
                e(this).css("background-color", n || "")
            })
        },
        toggleStyle: function(t, n, r) {
            e(this).mouseover(function() {
                e(this).addClass(t || "")
            }).mouseout(function() {
                e(this).addClass(n || "")
            }).click(function() {
                e(this).addClass(r || "")
            })
        }
    })
} (jQuery),
function() {
    if (jQuery.fn.lazyLoad) return;
    jQuery.fn.lazyLoad = function(e) {
        function r() {
            var e = jQuery(window).scrollTop() + document.documentElement.clientHeight * t.defScreen;
            for (var r = 0,
            i = n.length; r < i; r++) {
                var s = jQuery(n[r]);
                if (!s.hasClass(t.defClass)) continue;
                s.offset().top < e && (s.removeClass(t.defClass), s.attr("src", s.attr(t.orginalSrc)), s.removeAttr(t.orginalSrc))
            }
        }
        var t = jQuery.extend({
            defClass: "J_imgLazyload",
            defScreen: 1,
            container: "body",
            orginalSrc: "original"
        },
        e || {}),
        n = function() {
            if (t.container.constructor == String) return jQuery(t.container + " ." + t.defClass);
            if (t.container.constructor == Array) {
                var e = new Array;
                for (var n = 0,
                r = t.container.length; n < r; n++) jQuery(t.container[n] + " ." + t.defClass).length > 0 && e.concat(jQuery(t.container[n]));
                return e
            }
            return {}
        } ();
        jQuery(window).scroll(r).resize(r),
        r()
    },
    jQuery(function() {
        jQuery("body").lazyLoad()
    })
} (),
jshop.component = jshop.component || {};
var skuIdPriceObj;
jQuery(function() {
    skuIdPriceObj = new SkuIdPriceGetting
}),
jshop.component.getScript = function(e, t) {
    var n = new Array,
    r = document.getElementsByTagName("head")[0] || document.documentElement,
    n = $("script", r);
    n.length > 0 && n.each(function(t, n) {
        return n.src == e && $(n).remove(),
        !0
    });
    var i = document.createElement("script");
    i.type = "text/javascript",
    i.src = e,
    r.appendChild(i)
},
jshop.component.arrayUnique = function(e) {
    var t = {},
    n = [],
    r = {};
    for (var i = 0,
    s = e.length; i < s; i++) {
        var o = e.eq(i),
        u = o.attr("jdprice");
        if (u == undefined || u == "") u = o.attr("jsprice");
        if (u == undefined || u == "") u = o.attr("jskuprice");
        t[u] == undefined ? (t[u] = o.offset().top, n.push(o), r[u] = n.length - 1) : t[u] > o.offset().top && (t[u] = o.offset().top, n[r[u]] = o)
    }
    return n
},



jshop.component.setDiscountPrice = function(e) {
    function t(e, t) {
        if (e == 0 || t == 0) return "";
        var n = (e - t) / e * 100,
        r = Math.round(n);
        return r
    }
    if (!e) return;
    if (e.m) var n = e.p >= 0 ? e.p: 0,
    r = e.m >= 0 ? e.m: 0;
    else if (e.skuId) var n = e.jdPrice ? e.jdPrice.amount: 0,
    r = e.skuPrice ? e.skuPrice.amount: 0;
    var i = jQuery("span[diprice=" + (e.id || e.skuId) + "]");
    $.each(i,
    function(e, i) {
        $(i).html(t(r, n))
    })
},
jshop.component.setSavePrice = function(e) {
    function t(e, t) {
        if (t == 0 || e == 0) return "";
        var n = e - t;
        if (n < 0 || n == 0) n = "0";
        return n = n.toString().match(/\d+(\.\d{1,2})?/)[0],
        n
    }
    if (!e) return;
    if (e.m) var n = e.p >= 0 ? e.p: 0,
    r = e.m >= 0 ? e.m: 0;
    else if (e.skuId) var n = e.jdPrice ? e.jdPrice.amount: 0,
    r = e.skuPrice ? e.skuPrice.amount: 0;
    var i = jQuery("span[saprice=" + (e.id || e.skuId) + "]");
    $.each(i,
    function(e, i) {
        $(i).html(t(r, n))
    })
},
jshop.component.getSaveSalePrice = function(e) {
    function t(e, t) {
        if (t == 0 || e == 0) return "";
        var n = e - t;
        if (n < 0 || n == 0) n = "0";
        return n = n.toString().match(/\d+(\.\d{1,2})?/)[0],
        n
    }
    if (!e) return;
    if (e.m) var n = e.p >= 0 ? e.p: 0,
    r = e.m >= 0 ? e.m: 0;
    else if (e.skuId) var n = e.jdPrice ? e.jdPrice.amount: 0,
    r = e.salesPrice ? e.salesPrice.amount: 0;
    var i = jQuery("span[ssprice=" + (e.id || e.skuId) + "]");
    $.each(i,
    function(e, i) {
        $(i).html(t(r, n))
    })
},
jshop.component.getDiscountSalePrice = function(e) {
    function t(e, t) {
        if (e == 0 || t == 0) return "";
        var n = t / e * 10,
        r = new Number(n);
        return r.toFixed(1)
    }
    if (!e) return;
    if (e.m) var n = e.p >= 0 ? e.p: 0,
    r = e.m >= 0 ? e.m: 0;
    else if (e.skuId) var n = e.jdPrice ? e.jdPrice.amount: 0,
    r = e.salesPrice ? e.salesPrice.amount: 0;
    var i = jQuery("span[dsaleprice=" + (e.id || e.skuId) + "]");
    $.each(i,
    function(e, i) {
        $(i).html(t(r, n))
    })
},
jshop.component.getDiscountSkuPrice = function(e) {
    function t(e, t) {
        if (e == 0 || t == 0) return "";
        var n = t / e * 10,
        r = new Number(n);
        return r.toFixed(1)
    }
    if (!e) return;
    if (e.m) var n = e.p >= 0 ? e.p: 0,
    r = e.m >= 0 ? e.m: 0;
    else if (e.skuId) var n = e.jdPrice ? e.jdPrice.amount: 0,
    r = e.skuPrice ? e.skuPrice.amount: 0;
    var i = jQuery("span[dskuprice=" + (e.id || e.skuId) + "]");
    $.each(i,
    function(e, i) {
        $(i).html(t(r, n))
    })
},


$(function() {
    function e() {
        var e = $(".layoutcontainer").attr("isfixed"),
        t = $(".layoutcontainer").offset().top,
        n = typeof gConfig != "undefined",
        e = parseInt(e);
        e && $(window).scroll(function() {
            var e = $(this).scrollTop();
            e >= t ? $(".layoutcontainer").css("background-attachment", "fixed") : $(".layoutcontainer").css("background-attachment", "scroll")
        })
    }
    e()
}),
jdModelCallCenter && (jdModelCallCenter.init = function() {
    var e = this;
    $.ajax({
        url: ("https:" == document.location.protocol ? "https://": "http://") + "passport." + pageConfig.FN_getDomain() + "/new/helloService.ashx?m=ls&sso=0",
        dataType: "jsonp",
        scriptCharset: "gbk",
        success: function(t) {
            e.tbClose(),
            t && t.info && $("#loginbar").html(t.info),
            e.settings.fn()
        }
    })
});