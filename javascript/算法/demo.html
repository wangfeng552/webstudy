<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <script>
        var arr = [500, 400, 320, 200, 1, 10, 8, 100, 130, 120, 135, 140, 180, 190, 170, -1, -2, -4]; // 原有数组
        var targetNum = 6; // 目标数值
        /**
         * @method
         * @author  gedesiwen
         * @param {array} arr 需要查找的数组
         * @param {number} num 目标数值，查找的是与这个数值最接近的
         * @return {number} 返回查找到的最接近的数值
         * @desc 获取数组中与目标数值最接近的数值
         */
        function findCloseNum(arr, num) {
            var index = 0; // 保存最接近数值在数组中的索引
            var d_value = Number.MAX_VALUE; // 保存差值绝对值，默认为最大数值
            for (var i = 0; i < arr.length; i++) {
                var new_d_value = Math.abs(arr[i] - num); // 新差值
                if (new_d_value <= d_value) { // 如果新差值绝对值小于等于旧差值绝对值，保存新差值绝对值和索引
                    if (new_d_value === d_value && arr[i] < arr[index]) { // 如果数组中两个数值跟目标数值差值一样，取大
                        continue;
                    }
                    index = i;
                    d_value = new_d_value;
                }
            }
            return arr[index] // 返回最接近的数值
        }
        findCloseNum(arr, targetNum);
    </script>


    <script>
        var arr = [
            500, 400, 320, 200, 1, 10, 8, 100, 130, 120, 135, 140, 180, 190, 170, -1,
            -2, -4,
        ]; // 原有数组
        var targetNum = -20; // 目标数值
        // 新数组相加之后的值取最小值后找下标  由于新数组与原数组下标对应 即是原数组最小值下标
        function findCloseNum2(arr, num) {
            return arr
                .map((item) => Math.abs(num - item))
                .findIndex(
                    (item) =>
                        item === Math.min(...arr.map((item) => Math.abs(num - item)))
                );
        }

        findCloseNum2(arr, targetNum)
    </script>
</body>

</html>