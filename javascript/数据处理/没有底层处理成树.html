<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <script>

        function insert(item, node) {
            const pid = item.parent_id
            if (pid === node.key) {
                node.children.push(item)
                node.children.sort(function (a, b) {
                    return b.right_value - a.right_value
                })
                return true
            }
            for (let i = 0; i < node.children.length; i++) {
                const ptr = node.children[i]
                if (ptr.type === 'document') continue
                const result = insert(item, ptr)
                if (result === true) return true
            }
            return false
        }
        var filterList = [
            {
                "id": 186,
                "type": "hierarchy",
                "title": "ç›®å½•äºŒ",
                "left_value": 198,
                "right_value": 229,
                "parent_id": -1,
                "update_time": 1631862386
            },
            {
                "id": 247,
                "type": "hierarchy",
                "title": "ä¹°ä¹°ä¹°ä¹°ä¹°",
                "left_value": 207,
                "right_value": 228,
                "parent_id": 186,
                "update_time": 1631862386
            },
            {
                "id": 267,
                "type": "document",
                "title": "request198çš„222",
                "left_value": 224,
                "right_value": 225,
                "parent_id": 247,
                "update_time": 1631862386
            },
            {
                "id": 253,
                "type": "hierarchy",
                "title": "#$%^&*()(*2435465787",
                "left_value": 199,
                "right_value": 206,
                "parent_id": 186,
                "update_time": 1631862386
            },
            {
                "id": 67,
                "type": "hierarchy",
                "title": "ç›®å½•ä¸€",
                "left_value": 100,
                "right_value": 197,
                "parent_id": -1,
                "update_time": 1631862386
            },
            {
                "id": 1559,
                "type": "document",
                "title": "Elasticsearchå®žæˆ˜ç¯‡å–µå–µå–µå–µå–µå–µæœ¨æœ¨æœ¨æœ¨æœ¨æœ¨æœ¨æœ¨çš„ç‚¹ç‚¹æ»´æ»´å¤šå¤šå¤šå¤šå¤šå¤šå¤šå¤šå¤šå¤šå¤šå¤šå¤šå¤šå¤šæœ¨æœ¨æœ¨æœ¨æœ¨æœ¨æœ¨æœ¨æœ¨æœ¨æœ¨æœ¨æœ¨æœ¨æœ¨æœ¨æœ¨æœ¨æœ¨æœ¨æœ¨æœ¨æœ¨æœ¨æœ¨æœ¨æœ¨æœ¨æœ¨æœ¨æœ¨æœ¨æœ¨æœ¨æœ¨æœ¨æœ¨æœ¨æœ¨æœ¨æœ¨æœ¨æœ¨æœ¨æœ¨æœ¨æœ¨æœ¨æœ¨æœ¨",
                "left_value": 82,
                "right_value": 83,
                "parent_id": -1,
                "update_time": 1631862386
            },
            {
                "id": 1566,
                "type": "document",
                "title": "å’•å’•å’•å’•å’•å’•è¿‡è¿‡è¿‡è¿‡è¿‡è¿‡è¿‡è¿‡è¿‡è¿‡è¿‡è¿‡è¿‡è¿‡è¿‡è¿‡è¿‡è¿‡è¿‡è¿‡è¿‡è¿‡å’•å’•å’•å’•å’•å’•è¿‡è¿‡è¿‡è¿‡è¿‡è¿‡è¿‡è¿‡è¿‡è¿‡è¿‡è¿‡è¿‡è¿‡è¿‡è¿‡è¿‡è¿‡è¿‡è¿‡è¿‡è¿‡ ffdsfdsfds",
                "left_value": 74,
                "right_value": 75,
                "parent_id": -1,
                "update_time": 1634019817
            },
            {
                "id": 1567,
                "type": "document",
                "title": "å’•å’•å’•å’•å’•å’•dsfdfdsfdsfdsfdsfè¿‡è¿‡è¿‡è¿‡è¿‡è¿‡è¿‡appcustomerteè¿‡è¿‡è¿‡è¿‡è¿‡è¿‡è¿‡è¿‡è¿‡è¿‡è¿‡è¿‡è¿‡è¿‡è¿‡å’•å’•å’•å’•å’•å’•è¿‡è¿‡è¿‡è¿‡è¿‡è¿‡è¿‡è¿‡è¿‡è¿‡è¿‡è¿‡è¿‡è¿‡è¿‡è¿‡è¿‡è¿‡è¿‡è¿‡è¿‡è¿‡ffdsfdsfds",
                "left_value": 72,
                "right_value": 73,
                "parent_id": -1,
                "update_time": 1634019828
            },
            {
                "id": 1729,
                "type": "hierarchy",
                "title": "OOè¡¨æƒ…çš¿ooOmå£ooooooå¢“ow",
                "left_value": 52,
                "right_value": 59,
                "parent_id": -1,
                "update_time": 1631862386
            },
            {
                "id": 1783,
                "type": "hierarchy",
                "title": "pppppppppppppppppppp",
                "left_value": 34,
                "right_value": 51,
                "parent_id": -1,
                "update_time": 1631862386
            },
            {
                "id": 1781,
                "type": "document",
                "title": "Elasticsearchå®žæˆ˜ç¯‡111",
                "left_value": 32,
                "right_value": 33,
                "parent_id": -1,
                "update_time": 1631862386
            },
            {
                "id": 2014,
                "type": "document",
                "title": "ç²Ÿæ˜¥å…°æµ‹è¯•ç”¨",
                "left_value": 28,
                "right_value": 29,
                "parent_id": -1,
                "update_time": 1631862386
            },
            {
                "id": 2028,
                "type": "document",
                "title": "è¨èŠ¬ä»˜ä»˜ä»˜ä»˜ä»˜ä»˜ä»˜ä»˜ä»˜ä»˜ä»˜ä»˜ä»˜ä»˜ä»˜ä»˜ä»˜ä»˜ä»˜ä»˜ä»˜ä»˜ä»˜ä»˜ä»˜æ²™å‘å‘å‘å‘çŽ‹å¤«äººæ²™å‘å‘å‘é­è£çˆ±æˆ‘çš„æˆ‘é—®é—®é˜¿å‡¡è¾¾å“‡æ‰“æ”¾å¤§æŒ‰æ—¶å¤§å£°ç‚¹å®‰å¤§å”é˜¿è¨å¾·çš„æ’’å‘æ›´å¤šçš„æ˜¯GVæ˜¯å›ºå®šé£žè¨å°”é£žå£«å¤§å¤«å‘æ’’ç¬¬ä¸‰æ–¹è¿‡å¤šæ—¶å•Šå®šä½æ’’çš„",
                "left_value": 22,
                "right_value": 23,
                "parent_id": -1,
                "update_time": 1631862386
            },
            {
                "id": 2126,
                "type": "document",
                "title": "ðŸ§‘ðŸ‘¸ðŸ‘¸ðŸ‘©â€ðŸ¦±ðŸ‘©â€ðŸ¦±ðŸ§“ðŸ‘±ðŸ§‘ðŸ‘¸ðŸ‘¸ðŸ‘©â€ðŸ¦±ðŸ‘©â€ðŸ¦±ðŸ§“ðŸ‘±ðŸ§‘ðŸ‘¸ðŸ‘¸ðŸ‘©â€ðŸ¦±ðŸ‘©â€ðŸ¦±ðŸ§“ðŸ‘±ðŸ§‘ðŸ‘¸ðŸ‘¸ðŸ‘©â€ðŸ¦±ðŸ‘©â€ðŸ¦±ðŸ§“ðŸ‘±",
                "left_value": 14,
                "right_value": 15,
                "parent_id": -1,
                "update_time": 1631862386
            }
        ]

        const root = {
            key: -1,
            children: [],
        }

        for (let i = 0; i < filterList.length; i++) {
            const ptr = filterList[i]
            let item
            if (ptr.type === 'document') {
                item = {
                    type: 'document',
                    key: ptr.id,
                    parent_id: ptr.parent_id,
                    title: ptr.title,
                    right_value: ptr.right_value,
                }
            } else {
                item = {
                    key: ptr.id,
                    parent_id: ptr.parent_id,
                    title: ptr.title,
                    children: [],
                    right_value: ptr.right_value,
                }
            }
            insert(item, root)
        }

        console.log(root);
    </script>

</body>

</html>